一、乐观锁与悲观锁

乐观锁： 非互斥同步锁，例如 原子类、并发容器

悲观锁：互斥同步锁，例如 sync 与 lock

数据库：

乐观： version

悲观: select for update



两种锁各自的使用场景：各有干秋
悲观锁：适合并发写入多的情况，适用于临界区持锁时间比较长的
情况，悲观锁可以避免大量的无用自旋等消耗，典型情况：
1临界区有IO操作
2临界区代码复杂或者循环量大
3临界区竞争非常激烈

乐观锁：适合并发写入少，大部分是读取的场景，不加锁的能让读
取性能大幅提高。

