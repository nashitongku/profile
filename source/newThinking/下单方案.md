下单扣库存方案：

1. 下单立即扣库存：虽然链路短、性能，但是容易被恶意下单。

2. 支付扣库存：可以防止恶意下单，但是只有在支付的时候才能确定库存。不适用于秒杀。

3. 下单预扣库存，支付超时自动取消：对于恶意下单的，超时会自动取消。又能把大流量拦截在下单之前。



订单号：第一位：以2021年为偏移量，2022年则为1； 2-4位：一年当中的第多少天；5-9位：一天当中的第几秒（一天有86400秒）；10-13位：通过redis递增（每秒能生成9999个订单号）



